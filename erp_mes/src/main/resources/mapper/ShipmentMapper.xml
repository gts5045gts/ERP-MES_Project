<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.erp_mes.mes.business.mapper.ShipmentMapper">
	<select id="getStatusOrder" resultType="com.erp_mes.mes.business.dto.OrderDTO">
		SELECT 
			order_id,
			client_name,
			order_date,
			delivery_date
		FROM 
		 	orders
		 WHERE
		 	order_status = 'RECEIVED' OR order_status = 'INPRODUCTION'
	</select>
	
	<select id="getOrderDetailWithStock" resultType="com.erp_mes.mes.business.dto.OrderDetailDTO">
        SELECT
            od.order_id,
            od.product_name,
            p.quantity AS stockQty,		-- 재고량
            od.order_qty				-- 출하수량
        FROM
            orders_detail od
        JOIN
            product p ON od.product_id = p.product_id
        WHERE
            od.order_id = #{orderId}
    </select>
    
    
</mapper>